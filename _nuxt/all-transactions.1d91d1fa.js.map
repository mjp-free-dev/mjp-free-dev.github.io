{"version":3,"file":"all-transactions.1d91d1fa.js","sources":["../../../../src/pages/moder/all-transactions.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport {AppGrid, routerLinkIdPreset} from '@/components/grid';\r\nimport {TransactionService} from '@/services/transaction.service';\r\nimport TransactionForm from './components/transaction-form.vue';\r\nimport {transactionConfig} from '@/logic/transaction-config';\r\nimport {pickGridColumns} from '@/logic/common';\r\n\r\nconst grid = ref(null as null | InstanceType<typeof AppGrid>);\r\nconst dialogVisible = ref(false);\r\nconst service = useService(TransactionService);\r\n\r\nfunction onRowAdd() {\r\n  dialogVisible.value = true;\r\n}\r\n\r\nasync function onRowAdded(item: any) {\r\n  await service.addTransactionInPln(item);\r\n  dialogVisible.value = false;\r\n  grid.value?.refresh();\r\n}\r\n\r\nconst config = pickGridColumns(\r\n  transactionConfig,\r\n  [\r\n    'id',\r\n    'orderId',\r\n    'userIdDisplayName',\r\n    'amount',\r\n    'currency',\r\n    'oldBalance',\r\n    'newBalance',\r\n    'comment',\r\n    'createdByDisplayName',\r\n    'createdAt',\r\n  ],\r\n  {\r\n    getData: () => service.getAllTransactions(),\r\n    title: 'Все транзакции',\r\n    allowAdd: () => onRowAdd(),\r\n    columns: {\r\n      orderId: routerLinkIdPreset('/moder/all-order-info?orderId='),\r\n    },\r\n  },\r\n);\r\n</script>\r\n\r\n<template>\r\n  <AppGrid\r\n    ref=\"grid\"\r\n    :config=\"config\"\r\n  />\r\n  <Dialog\r\n    v-model:visible=\"dialogVisible\"\r\n    modal\r\n    header=\"Добавить\"\r\n  >\r\n    <TransactionForm @submit=\"onRowAdded\" />\r\n  </Dialog>\r\n</template>\r\n"],"names":["grid","ref","dialogVisible","service","useService","TransactionService","onRowAdd","onRowAdded","item","_a","config","pickGridColumns","transactionConfig","routerLinkIdPreset"],"mappings":"m7BAOM,MAAAA,EAAOC,EAAI,IAA2C,EACtDC,EAAgBD,EAAI,EAAK,EACzBE,EAAUC,EAAWC,CAAkB,EAE7C,SAASC,GAAW,CAClBJ,EAAc,MAAQ,EACxB,CAEA,eAAeK,EAAWC,EAAW,OAC7B,MAAAL,EAAQ,oBAAoBK,CAAI,EACtCN,EAAc,MAAQ,IACtBO,EAAAT,EAAK,QAAL,MAAAS,EAAY,SACd,CAEA,MAAMC,EAASC,EACbC,EACA,CACE,KACA,UACA,oBACA,SACA,WACA,aACA,aACA,UACA,uBACA,WACF,EACA,CACE,QAAS,IAAMT,EAAQ,mBAAmB,EAC1C,MAAO,iBACP,SAAU,IAAMG,EAAS,EACzB,QAAS,CACP,QAASO,EAAmB,gCAAgC,CAC9D,CACF,CAAA"}