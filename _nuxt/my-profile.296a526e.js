import{f as y,s as h,r as l,g as b,v as F,x,y as S,q as m,o as i,c as _,b as p,w as k,z as I}from"./entry.7cb56bd3.js";import{_ as P}from"./_plugin-vue_export-helper.c27b6911.js";const q={class:"layout"},C={key:0,class:"card"},V=y({__name:"my-profile",setup(w){const a=h(),n=l(s(c())),e=l(null),f=b().afterEach(()=>{const o=c();n.value=s(o)});F(async()=>{e.value=await a.getProfile()}),x(f);function s(o){return[{$el:"h5",children:"Личная информация"},...o?[{$el:"p",children:"Заполните профиль, что бы продолжить работу"}]:[],{$formkit:"primeInputText",name:"full_name",label:"Имя",validation:"required"},{$formkit:"primeInputText",type:"tel",name:"phone_number",label:"Телефон",validation:""}]}function c(){const r=S().query.force;return!!(Array.isArray(r)?r[0]:r)}async function d(){if(!e.value)return;const{full_name:o,phone_number:t}=e.value;await a.setProfile(o,t)}return(o,t)=>{const r=m("FormKitSchema"),u=m("FormKit");return i(),_("div",q,[e.value?(i(),_("div",C,[p(u,{modelValue:e.value,"onUpdate:modelValue":t[0]||(t[0]=v=>e.value=v),type:"form","submit-attrs":{inputClass:"p-button p-component"},onSubmit:d},{default:k(()=>[p(r,{schema:n.value,data:e.value},null,8,["schema","data"])]),_:1},8,["modelValue"])])):I("",!0)])}}});const A=P(V,[["__scopeId","data-v-5fe7e524"]]);export{A as default};
