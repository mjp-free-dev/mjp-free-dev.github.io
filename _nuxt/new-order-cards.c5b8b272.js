import{f as v,l as _,g as b,r as n,o as g,k as S,w as s,b as u,q as y,S as h,C as k}from"./entry.e4510a96.js";import C from"./new-order-form.1d41385f.js";import{A as V}from"./AppCardLayout.76364f8c.js";import"./AppCardGroup.76fa47d7.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./product-form.20909329.js";import"./button.esm.7b475824.js";import"./index.esm.13b0b569.js";import"./AppCard.a0367c04.js";import"./order-form.vue.4814cf50.js";const M=v({__name:"new-order-cards",setup(w){const i=_(),l=b(h),r=n(null),a=n({comment:"",products:[{url:"",count:1}],shippingMethodId:null,vatDocumentRequired:!1});async function c(o){const e=await l.set(async t=>t.rpc("addOrder",o));e!=null&&e.id&&i.push("/user/my-order-info?orderId="+(e==null?void 0:e.id))}function d(o){return o.value.products.length>0}function m(o){a.value.products.splice(o,1)}function p(){a.value.products.push({url:"",count:1})}function f(){var o;(o=r.value)==null||o.node.submit()}return(o,e)=>(g(),S(y(k),{ref_key:"form",ref:r,modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=t=>a.value=t),type:"form",validation:"atLeastOneProduct","validation-rules":{atLeastOneProduct:d},"validation-messages":{atLeastOneProduct:"Добавьте хотя бы один товар."},actions:!1,onSubmit:c},{default:s(()=>[u(V,null,{default:s(()=>{var t;return[u(C,{"msg-source":(t=r.value)==null?void 0:t.node,onAdd:p,onDelete:m,onSubmit:f},null,8,["msg-source"])]}),_:1})]),_:1},8,["modelValue","validation-rules","validation-messages"]))}});export{M as default};
