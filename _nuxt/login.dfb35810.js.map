{"version":3,"file":"login.dfb35810.js","sources":["../../../../src/pages/account/login.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport {ref} from 'vue';\r\nimport {FormKitSchemaNode} from '@formkit/core';\r\nimport AppCard from '@/components/markup/AppCard.vue';\r\nimport AppCardGroup from '@/components/markup/AppCardGroup.vue';\r\nimport {AuthService} from '@/services/auth.service';\r\n\r\nconst data = ref({} as {email: string; password: string});\r\nconst service = useService(AuthService);\r\n\r\nconst otpSchema: FormKitSchemaNode[] = [\r\n  {\r\n    $formkit: 'primeInputText',\r\n    name: 'email',\r\n    label: 'Email',\r\n    validation: 'required | email',\r\n  },\r\n];\r\n\r\nconst passwordSchema: FormKitSchemaNode[] = [\r\n  ...otpSchema,\r\n  {\r\n    $formkit: 'primePassword',\r\n    name: 'password',\r\n    label: 'Пароль',\r\n    validation: 'required',\r\n    toggleMask: true,\r\n  },\r\n];\r\n\r\nasync function signInWithOtp() {\r\n  const {email} = data.value;\r\n  service.signInWithOtp(email);\r\n}\r\n\r\nfunction signInWithPass() {\r\n  const {email, password} = data.value;\r\n  service.signInWithPass(email, password);\r\n}\r\n\r\nfunction signInWithGoogle() {\r\n  service.signInWithOAuth('google');\r\n}\r\n</script>\r\n\r\n<template>\r\n  <AppCardGroup>\r\n    <AppCard\r\n      basis=\"300px\"\r\n      title=\"Вход по ссылке на email\"\r\n    >\r\n      <FormKit\r\n        v-model=\"data\"\r\n        type=\"form\"\r\n        :actions=\"false\"\r\n      >\r\n        <FormKitSchema\r\n          :schema=\"otpSchema\"\r\n          :data=\"data\"\r\n        />\r\n        <Button\r\n          icon=\"pi pi-at\"\r\n          label=\"Отправить ссылку на email\"\r\n          @click=\"signInWithOtp\"\r\n        />\r\n      </FormKit>\r\n    </AppCard>\r\n    <AppCard\r\n      basis=\"300px\"\r\n      title=\"Вход по логину и паролю\"\r\n    >\r\n      <FormKit\r\n        v-model=\"data\"\r\n        type=\"form\"\r\n        :actions=\"false\"\r\n      >\r\n        <FormKitSchema\r\n          :schema=\"passwordSchema\"\r\n          :data=\"data\"\r\n        />\r\n        <Button\r\n          icon=\"pi pi-sign-in\"\r\n          label=\"Войти\"\r\n          @click=\"signInWithPass\"\r\n        />\r\n      </FormKit>\r\n    </AppCard>\r\n    <AppCard\r\n      basis=\"300px\"\r\n      title=\"Вход через другие системы\"\r\n    >\r\n      <Button\r\n        icon=\"pi pi-google\"\r\n        label=\"Войти через Google\"\r\n        @click=\"signInWithGoogle\"\r\n      />\r\n    </AppCard>\r\n  </AppCardGroup>\r\n</template>\r\n"],"names":["data","ref","service","useService","AuthService","otpSchema","passwordSchema","signInWithOtp","email","signInWithPass","password","signInWithGoogle"],"mappings":"oVAOM,MAAAA,EAAOC,EAAI,CAAA,CAAuC,EAClDC,EAAUC,EAAWC,CAAW,EAEhCC,EAAiC,CACrC,CACE,SAAU,iBACV,KAAM,QACN,MAAO,QACP,WAAY,kBACd,CAAA,EAGIC,EAAsC,CAC1C,GAAGD,EACH,CACE,SAAU,gBACV,KAAM,WACN,MAAO,SACP,WAAY,WACZ,WAAY,EACd,CAAA,EAGF,eAAeE,GAAgB,CACvB,KAAA,CAAC,MAAAC,CAAK,EAAIR,EAAK,MACrBE,EAAQ,cAAcM,CAAK,CAC7B,CAEA,SAASC,GAAiB,CACxB,KAAM,CAAC,MAAAD,EAAO,SAAAE,GAAYV,EAAK,MACvBE,EAAA,eAAeM,EAAOE,CAAQ,CACxC,CAEA,SAASC,GAAmB,CAC1BT,EAAQ,gBAAgB,QAAQ,CAClC"}