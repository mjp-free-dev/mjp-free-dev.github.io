{"version":3,"file":"shipping-methods.1c8e1292.js","sources":["../../../../src/pages/admin/shipping-methods.vue"],"sourcesContent":["<script setup lang=\"tsx\">\r\nimport {Database} from '@/stores';\r\nimport {\r\n  stringColumnPreset,\r\n  AppGrid,\r\n  AppGridConfig,\r\n  boolColumnPreset,\r\n  stringColumnPresetNoEdit,\r\n} from '@/components/grid';\r\nimport {SupabaseService} from '@/services/supabase.service';\r\n\r\ntype ShippingMethod = Database['public']['Tables']['shippingMethod']['Row'];\r\nconst grid = ref(null as null | InstanceType<typeof AppGrid>);\r\nconst supabase = useService(SupabaseService);\r\n\r\nasync function getData() {\r\n  return await supabase.getMany(async x =>\r\n    x.from('shippingMethod').select(),\r\n  );\r\n}\r\n\r\nasync function onRowEditSave(data: ShippingMethod) {\r\n  await supabase.set(async x => x.from('shippingMethod').upsert(data));\r\n  await grid.value?.refresh();\r\n}\r\n\r\nasync function onRowAdd() {\r\n  await supabase.set(async x =>\r\n    x.from('shippingMethod').upsert({\r\n      name: '',\r\n      description: '',\r\n      enabled: false,\r\n    }),\r\n  );\r\n\r\n  await grid.value?.refresh();\r\n}\r\n\r\nconst config: AppGridConfig<ShippingMethod> = {\r\n  getData,\r\n  title: 'Способы получения',\r\n  allowAdd: () => onRowAdd(),\r\n  allowEdit: true,\r\n  emits: {\r\n    'row-edit-save': e => onRowEditSave(e.newData),\r\n  },\r\n  labels: {\r\n    id: '#',\r\n    name: 'Имя',\r\n    description: 'Описание',\r\n    enabled: 'Активность',\r\n  },\r\n  columns: {\r\n    id: stringColumnPresetNoEdit,\r\n    name: stringColumnPreset,\r\n    description: stringColumnPreset,\r\n    enabled: boolColumnPreset,\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <AppGrid\r\n    ref=\"grid\"\r\n    :config=\"config\"\r\n  />\r\n</template>\r\n"],"names":["grid","ref","supabase","useService","SupabaseService","getData","getMany","x","from","select","onRowEditSave","data","set","upsert","value","refresh","onRowAdd","name","description","enabled","config","title","allowAdd","allowEdit","emits","e","newData","labels","id","columns","stringColumnPresetNoEdit","stringColumnPreset","boolColumnPreset"],"mappings":"wuBAYA,MAAMA,EAAOC,EAAI,IAA2C,EACtDC,EAAWC,EAAWC,CAAe,EAE3C,eAAeC,GAAU,CACvB,OAAO,MAAMH,EAASI,QAAQ,MAAMC,GAClCA,EAAEC,KAAK,gBAAgB,EAAEC,OAAM,CACjC,CACF,CAEA,eAAeC,EAAcC,EAAsB,OACjD,MAAMT,EAASU,IAAI,MAAML,GAAKA,EAAEC,KAAK,gBAAgB,EAAEK,OAAOF,CAAI,CAAC,EACnE,OAAMX,EAAAA,EAAKc,QAALd,YAAAA,EAAYe,UACpB,CAEA,eAAeC,GAAW,OACxB,MAAMd,EAASU,IAAI,MAAML,GACvBA,EAAEC,KAAK,gBAAgB,EAAEK,OAAO,CAC9BI,KAAM,GACNC,YAAa,GACbC,QAAS,EACV,CAAA,CACH,EAEA,OAAMnB,EAAAA,EAAKc,QAALd,YAAAA,EAAYe,UACpB,CAEA,MAAMK,EAAwC,CAC5Cf,QAAAA,EACAgB,MAAO,oBACPC,SAAUA,IAAMN,EAAU,EAC1BO,UAAW,GACXC,MAAO,CACL,gBAAiBC,GAAKf,EAAce,EAAEC,OAAO,CAC9C,EACDC,OAAQ,CACNC,GAAI,IACJX,KAAM,MACNC,YAAa,WACbC,QAAS,YACV,EACDU,QAAS,CACPD,GAAIE,EACJb,KAAMc,EACNb,YAAaa,EACbZ,QAASa,CACX"}