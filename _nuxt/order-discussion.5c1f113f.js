import x from"./inputtext.esm.ace789a5.js";import{s as M}from"./button.esm.a41dd05c.js";import{A as I}from"./AppCard.15c0afdc.js";import{A as b}from"./AppCardGroup.02cde9cc.js";import w from"./order-discussion-message.5ec81510.js";import{f as A,E as C,r as c,s as k,o as a,k as l,w as i,b as d,a as m,c as B,F as O,A as p,G as V,H as h}from"./entry.6f82f3e9.js";import{_ as y}from"./_plugin-vue_export-helper.c27b6911.js";import"./index.esm.63a65999.js";const D={class:"chat-container"},N={class:"user-message"},E=A({__name:"order-discussion",props:{orderId:{},mode:{}},setup(_){const s=_,o=C(),t=c([]),e=c("");k(async()=>{t.value=await o.getOrderMessages(s.orderId)});async function f(){e.value&&(s.mode==="customer"?await o.addCustomerMessage(s.orderId,e.value):await o.addModerMessage(s.orderId,e.value),e.value="",t.value=await o.getOrderMessages(s.orderId))}return(F,n)=>{const v=x,g=M;return a(),l(b,null,{default:i(()=>[d(I,{basis:"700px",title:"Обсуждение заказа #"+s.orderId},{default:i(()=>[m("div",D,[(a(!0),B(V,null,O(p(t),r=>{var u;return a(),l(w,{time:r.createdAt,source:r.source,sender:(u=r.userPublicProfile)==null?void 0:u.fullName,text:r.text},null,8,["time","source","sender","text"])}),256))]),m("div",N,[d(v,{modelValue:p(e),"onUpdate:modelValue":n[0]||(n[0]=r=>h(e)?e.value=r:null),class:"messagebox",placeholder:"Введите сообщение"},null,8,["modelValue"]),d(g,{label:"Отправить",onClick:f})])]),_:1},8,["title"])]),_:1})}}});const $=y(E,[["__scopeId","data-v-d8e97015"]]);export{$ as default};
