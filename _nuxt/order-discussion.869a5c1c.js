import x from"./inputtext.esm.d8346243.js";import{s as g}from"./button.esm.cc1e67b9.js";import{f as M,i as b,M as I,r as i,l as C,o as t,k as c,w as l,b as d,a as u,c as w,C as y,x as p,F as k,D as A}from"./entry.fc266965.js";import{A as B}from"./AppCard.c4a1baa7.js";import{A as V}from"./AppCardGroup.c93d92d5.js";import h from"./order-discussion-message.abb1cbc7.js";import{_ as D}from"./_plugin-vue_export-helper.c27b6911.js";import"./index.esm.d47bfa4f.js";import"./datetime.f31b9a37.js";const O={class:"chat-container"},N={class:"user-message"},S=M({__name:"order-discussion",props:{orderId:{},mode:{}},setup(m){const s=m,a=b(I),o=i([]),e=i("");C(async()=>{o.value=await a.getOrderMessages(s.orderId)});async function _(){e.value&&(s.mode==="customer"?await a.addCustomerMessage(s.orderId,e.value):await a.addModerMessage(s.orderId,e.value),e.value="",o.value=await a.getOrderMessages(s.orderId))}return(F,n)=>{const f=x,v=g;return t(),c(V,null,{default:l(()=>[d(B,{basis:"700px",title:"Обсуждение заказа #"+s.orderId},{default:l(()=>[u("div",O,[(t(!0),w(k,null,y(p(o),r=>(t(),c(h,{time:r.createdAt,source:r.source,sender:r.displayName,text:r.displayText},null,8,["time","source","sender","text"]))),256))]),u("div",N,[d(f,{modelValue:p(e),"onUpdate:modelValue":n[0]||(n[0]=r=>A(e)?e.value=r:null),class:"messagebox",placeholder:"Введите сообщение"},null,8,["modelValue"]),d(v,{label:"Отправить",onClick:_})])]),_:1},8,["title"])]),_:1})}}});const z=D(S,[["__scopeId","data-v-bada407b"]]);export{z as default};
