import x from"./inputtext.esm.45cd8726.js";import{s as M}from"./button.esm.80d429ee.js";import{f as I,F as b,i as w,r as i,s as y,o as t,k as u,w as l,b as a,a as p,c as C,G as k,z as m,H as A,I as B,M as O}from"./entry.3eeb7ad7.js";import{A as V}from"./AppCard.b8a305ce.js";import{A as h}from"./AppCardGroup.e1de8908.js";import S from"./order-discussion-message.16f4b32d.js";import{_ as D}from"./_plugin-vue_export-helper.c27b6911.js";import"./index.esm.2ade5b5f.js";const N={class:"chat-container"},F={class:"user-message"},G=I({__name:"order-discussion",props:{orderId:{},mode:{}},setup(_){const s=_,d=b(),n=w(O),o=i([]),e=i("");y(async()=>{o.value=await n.getOrderMessages(s.orderId)});async function f(){e.value&&(s.mode==="customer"?await d.addCustomerMessage(s.orderId,e.value):await d.addModerMessage(s.orderId,e.value),e.value="",o.value=await n.getOrderMessages(s.orderId))}return(T,c)=>{const v=x,g=M;return t(),u(h,null,{default:l(()=>[a(V,{basis:"700px",title:"Обсуждение заказа #"+s.orderId},{default:l(()=>[p("div",N,[(t(!0),C(A,null,k(m(o),r=>(t(),u(S,{time:r.createdAt,source:r.source,sender:r.displayName,text:r.displayText},null,8,["time","source","sender","text"]))),256))]),p("div",F,[a(v,{modelValue:m(e),"onUpdate:modelValue":c[0]||(c[0]=r=>B(e)?e.value=r:null),class:"messagebox",placeholder:"Введите сообщение"},null,8,["modelValue"]),a(g,{label:"Отправить",onClick:f})])]),_:1},8,["title"])]),_:1})}}});const q=D(G,[["__scopeId","data-v-db76c248"]]);export{q as default};
