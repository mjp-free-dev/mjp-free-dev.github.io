import{f as A,s as k,r as f,g as y,S as C,O as I,i as P,j as O,o as m,k as u,w as t,b as a,q as d,n as _}from"./entry.52dc1539.js";import{A as q}from"./AppCardGroup.bb33e21d.js";import{A as S}from"./AppCardLayout.d9637c30.js";import F from"./order-discussion.276c97ae.js";import x from"./new-order-form.62563dde.js";import{_ as B}from"./AppOrderPublicStatusForm.vue.42868c8d.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./inputtext.esm.48a58b64.js";import"./button.esm.2c654bfb.js";import"./index.esm.808fdf09.js";import"./AppCard.e7e64d2e.js";import"./order-discussion-message.cf73aef3.js";import"./datetime.f31b9a37.js";import"./order-form.vue.d096f966.js";import"./AppProductsGrid.vue.f5a6c5ad.js";import"./app-grid.vue.a2deb59e.js";import"./inputnumber.esm.f70e74ca.js";import"./dropdown.esm.eb2bd712.js";import"./index.esm.8cd44613.js";import"./overlayeventbus.esm.e180a120.js";import"./virtualscroller.esm.cd9c4eaa.js";import"./tristatecheckbox.esm.479ba751.js";import"./checkbox.esm.cc491fd3.js";import"./overlaypanel.esm.0dc180b1.js";import"./index.esm.482688f0.js";const ne=A({__name:"all-order-info",setup(N){const n=k().query.orderId,s=Number(Array.isArray(n)?n[0]:n),r=f(null),l=f(null),v=y(C),w=y(I);async function p(){const e=await w.getAllOrders(s);r.value=e[0]}P(p);function V(){var e;(e=l.value)==null||e.node.submit()}async function b(e){await v.set(async o=>o.rpc("updateOrderStatus",{orderId:e.id,newTypeId:e.typeId,newBuyPrice:e.buyPrice,newSellPrice:e.sellPrice})),await p()}return(e,o)=>{const c=O("FormKit");return m(),u(S,null,{default:t(()=>[r.value?(m(),u(c,{key:0,modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=i=>r.value=i),type:"form",actions:!1},{default:t(()=>[a(S,null,{default:t(()=>[a(x,{readonly:!0,"order-name":"#"+d(s)},null,8,["order-name"])]),_:1})]),_:1},8,["modelValue"])):_("",!0),r.value?(m(),u(c,{key:1,ref_key:"orderStatusForm",ref:l,modelValue:r.value.orderStatus,"onUpdate:modelValue":o[1]||(o[1]=i=>r.value.orderStatus=i),type:"form",actions:!1,onSubmit:b},{default:t(()=>[a(q,null,{default:t(()=>[a(B,{id:d(s),readonly:!1,onUpdate:V},null,8,["id"])]),_:1})]),_:1},8,["modelValue"])):_("",!0),a(F,{"order-id":d(s),mode:"moder"},null,8,["order-id"])]),_:1})}}});export{ne as default};
