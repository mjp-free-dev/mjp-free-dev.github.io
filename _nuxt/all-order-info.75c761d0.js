import{f as V,B as b,r as y,i as k,S as A,l as C,j as I,o as d,k as l,w as t,b as a,x as m,v as _}from"./entry.fc266965.js";import{A as P}from"./AppCardGroup.c93d92d5.js";import{A as S}from"./AppCardLayout.a4c8c61a.js";import q from"./order-discussion.869a5c1c.js";import x from"./new-order-form.c8173749.js";import{_ as B}from"./status-form.vue.b8b568c5.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./inputtext.esm.d8346243.js";import"./button.esm.cc1e67b9.js";import"./index.esm.d47bfa4f.js";import"./AppCard.c4a1baa7.js";import"./order-discussion-message.abb1cbc7.js";import"./datetime.f31b9a37.js";import"./product-form.017441d6.js";import"./order-form.vue.d79aa61e.js";const Q=V({__name:"all-order-info",setup(F){const n=b().query.orderId,s=Number(Array.isArray(n)?n[0]:n),o=y(null),i=y(null),p=k(A);async function c(){const e=await p.getMany(async r=>r.from("order").select("*, orderStatus(*)").eq("id",s));o.value=e[0]}C(c);function w(){var e;(e=i.value)==null||e.node.submit()}async function v(e){await p.set(async r=>r.rpc("updateOrderStatus",{orderId:e.id,newTypeId:e.typeId,newBuyPrice:e.buyPrice,newSellPrice:e.sellPrice})),await c()}return(e,r)=>{const f=I("FormKit");return d(),l(S,null,{default:t(()=>[o.value?(d(),l(f,{key:0,modelValue:o.value,"onUpdate:modelValue":r[0]||(r[0]=u=>o.value=u),type:"form",actions:!1},{default:t(()=>[a(S,null,{default:t(()=>[a(x,{readonly:!0,"order-name":"#"+m(s)},null,8,["order-name"])]),_:1})]),_:1},8,["modelValue"])):_("",!0),o.value?(d(),l(f,{key:1,ref_key:"orderStatusForm",ref:i,modelValue:o.value.orderStatus,"onUpdate:modelValue":r[1]||(r[1]=u=>o.value.orderStatus=u),type:"form",actions:!1,onSubmit:v},{default:t(()=>[a(P,null,{default:t(()=>[a(B,{id:m(s),readonly:!1,onUpdate:w},null,8,["id"])]),_:1})]),_:1},8,["modelValue"])):_("",!0),a(q,{"order-id":m(s),mode:"moder"},null,8,["order-id"])]),_:1})}}});export{Q as default};
