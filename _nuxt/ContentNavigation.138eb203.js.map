{"version":3,"mappings":"gTAOO,MAAMA,EAAyB,MAAOC,GAAiB,CAC5D,KAAM,CAAE,QAAAC,CAAS,EAAoBC,EAAA,EAAE,OACnC,OAAOF,GAAA,YAAAA,EAAc,SAAW,aAClCA,EAAeG,EAAaH,CAAY,GAE1C,MAAMI,EAASJ,EAAa,SACtBK,EAAUJ,EAAQ,aAAa,qBAAuBK,EAAgB,eAAmC,GAAGC,EAAKH,CAAM,KAAKH,EAAQ,eAAeO,EAAkBJ,CAAM,QAAQ,EAAIE,EAA8D,eAAeC,EAAKH,CAAM,KAAKH,EAAQ,gBAAgB,EAIlT,GAAIQ,EAAiB,EAEnB,OAD2B,MAAKC,EAAA,IAAC,OAAO,yBAAa,sLAAE,KAAMC,GAAMA,EAAE,kBAAkB,GAC7DP,CAAM,EAElC,MAAMQ,EAAO,MAAM,OAAOP,EAAS,CACjC,OAAQ,MACR,aAAc,OACd,OAAQJ,EAAQ,aAAa,qBAAuB,OAAS,CAC3D,QAASY,EAAcT,CAAM,EAC7B,aAAcU,EAAmB,EAAC,gBAAiB,CACpD,CACL,CAAG,EACD,GAAI,OAAOF,GAAS,UAAYA,EAAK,WAAW,iBAAiB,EAC/D,MAAM,IAAI,MAAM,WAAW,EAE7B,OAAOA,CACT,EC5BKG,IAA0B,CAC7B,KAAM,oBACN,MAAO,CAIL,MAAO,CACL,KAAM,OACN,SAAU,GACV,QAAS,MACX,CACD,EACD,MAAM,MAAMC,EAAO,CACjB,KAAM,CACJ,MAAAC,CACF,EAAIC,EAAOF,CAAK,EACVhB,EAAemB,EAAS,IAAM,OAClC,OAAI,QAAOC,EAAAH,EAAM,QAAN,YAAAG,EAAa,SAAW,WAC1BH,EAAM,MAAM,SAEdA,EAAM,KACf,CAAC,EACD,GAAI,CAACjB,EAAa,OAASqB,EAAS,eAAe,EAAE,MAAO,CAC1D,KAAM,CAAE,WAAYC,CAAY,EAAIC,EAAU,EAC9C,MAAO,CAAE,WAAYD,GAEvB,KAAM,CAAE,KAAME,CAAW,EAAI,MAAMC,EACjC,sBAAsBlB,EAAKP,EAAa,KAAK,IAC7C,IAAMD,EAAuBC,EAAa,KAAK,GAEjD,MAAO,CAAE,WAAAwB,EACV,EAKD,OAAOE,EAAK,CACV,MAAMC,EAAQC,IACR,CAAE,WAAAJ,GAAeE,EACjBG,EAAcC,GAASC,EAAEC,EAAU,CAAE,GAAIF,EAAK,KAAO,EAAE,IAAMA,EAAK,KAAK,EACvEG,EAAc,CAACrB,EAAMsB,IAAUH,EACnC,KACAG,EAAQ,CAAE,aAAcA,CAAI,EAAM,KAClCtB,EAAK,IAAKkB,GACJA,EAAK,SACAC,EAAE,KAAM,KAAM,CAACF,EAAWC,CAAI,EAAGG,EAAYH,EAAK,SAAUI,EAAQ,CAAC,CAAC,CAAC,EAEzEH,EAAE,KAAM,KAAMF,EAAWC,CAAI,CAAC,CACtC,GAEGK,EAAevB,GAASqB,EAAYrB,EAAM,CAAC,EACjD,OAAOe,GAAA,MAAAA,EAAO,QAAUA,EAAM,QAAQ,CAAE,WAAAH,EAAY,GAAG,KAAK,MAAQ,GAAIW,EAAYX,CAAU,CAChG,CACF,CAAC","names":["fetchContentNavigation","queryBuilder","content","useRuntimeConfig","queryContent","params","apiPath","withContentBase","hash","encodeQueryParams","shouldUseClientDB","__vitePreload","m","data","jsonStringify","useContentPreview","_sfc_main","props","query","toRefs","computed","_a","useState","navigation2","useContent","navigation","useAsyncData","ctx","slots","useSlots","renderLink","link","h","NuxtLink","renderLinks","level","defaultNode"],"sources":["../../../../node_modules/.pnpm/@nuxt+content@2.7.2/node_modules/@nuxt/content/dist/runtime/composables/navigation.mjs","../../../../node_modules/.pnpm/@nuxt+content@2.7.2/node_modules/@nuxt/content/dist/runtime/components/ContentNavigation.vue"],"sourcesContent":["import { hash } from \"ohash\";\nimport { useRuntimeConfig } from \"#app\";\nimport { encodeQueryParams } from \"../utils/query.mjs\";\nimport { jsonStringify } from \"../utils/json.mjs\";\nimport { addPrerenderPath, shouldUseClientDB, withContentBase } from \"./utils.mjs\";\nimport { queryContent } from \"./query.mjs\";\nimport { useContentPreview } from \"./preview.mjs\";\nexport const fetchContentNavigation = async (queryBuilder) => {\n  const { content } = useRuntimeConfig().public;\n  if (typeof queryBuilder?.params !== \"function\") {\n    queryBuilder = queryContent(queryBuilder);\n  }\n  const params = queryBuilder.params();\n  const apiPath = content.experimental.stripQueryParameters ? withContentBase(`/navigation/${process.dev ? \"_\" : `${hash(params)}.${content.integrity}`}/${encodeQueryParams(params)}.json`) : withContentBase(process.dev ? `/navigation/${hash(params)}` : `/navigation/${hash(params)}.${content.integrity}.json`);\n  if (!process.dev && process.server) {\n    addPrerenderPath(apiPath);\n  }\n  if (shouldUseClientDB()) {\n    const generateNavigation = await import(\"./client-db\").then((m) => m.generateNavigation);\n    return generateNavigation(params);\n  }\n  const data = await $fetch(apiPath, {\n    method: \"GET\",\n    responseType: \"json\",\n    params: content.experimental.stripQueryParameters ? void 0 : {\n      _params: jsonStringify(params),\n      previewToken: useContentPreview().getPreviewToken()\n    }\n  });\n  if (typeof data === \"string\" && data.startsWith(\"<!DOCTYPE html>\")) {\n    throw new Error(\"Not found\");\n  }\n  return data;\n};\n","<script>\nimport { toRefs, defineComponent, h, useSlots, computed } from \"vue\";\nimport { hash } from \"ohash\";\nimport { useAsyncData, fetchContentNavigation, useState, useContent } from \"#imports\";\nimport { NuxtLink } from \"#components\";\nexport default defineComponent({\n  name: \"ContentNavigation\",\n  props: {\n    /**\n     * A query to be passed to `fetchContentNavigation()`.\n     */\n    query: {\n      type: Object,\n      required: false,\n      default: void 0\n    }\n  },\n  async setup(props) {\n    const {\n      query\n    } = toRefs(props);\n    const queryBuilder = computed(() => {\n      if (typeof query.value?.params === \"function\") {\n        return query.value.params();\n      }\n      return query.value;\n    });\n    if (!queryBuilder.value && useState(\"dd-navigation\").value) {\n      const { navigation: navigation2 } = useContent();\n      return { navigation: navigation2 };\n    }\n    const { data: navigation } = await useAsyncData(\n      `content-navigation-${hash(queryBuilder.value)}`,\n      () => fetchContentNavigation(queryBuilder.value)\n    );\n    return { navigation };\n  },\n  /**\n   * Navigation empty fallback\n   * @slot empty\n   */\n  render(ctx) {\n    const slots = useSlots();\n    const { navigation } = ctx;\n    const renderLink = (link) => h(NuxtLink, { to: link._path }, () => link.title);\n    const renderLinks = (data, level) => h(\n      \"ul\",\n      level ? { \"data-level\": level } : null,\n      data.map((link) => {\n        if (link.children) {\n          return h(\"li\", null, [renderLink(link), renderLinks(link.children, level + 1)]);\n        }\n        return h(\"li\", null, renderLink(link));\n      })\n    );\n    const defaultNode = (data) => renderLinks(data, 0);\n    return slots?.default ? slots.default({ navigation, ...this.$attrs }) : defaultNode(navigation);\n  }\n});\n</script>\n"],"file":"_nuxt/ContentNavigation.138eb203.js"}