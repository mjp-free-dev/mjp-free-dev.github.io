import{f as y,y as h,q as l,g as b,z as F,A as S,B as k,v as m,o as i,c as _,b as p,w as x,C}from"./entry.a1f6cece.js";import{_ as I}from"./_plugin-vue_export-helper.c27b6911.js";const P={class:"layout"},q={key:0,class:"card"},V=y({__name:"my-profile",setup(w){const a=h(),n=l(s(c())),e=l(null),f=b().afterEach(()=>{const o=c();n.value=s(o)});F(async()=>{e.value=await a.getProfile()}),S(f);function s(o){return[{$el:"h5",children:"Личная информация"},...o?[{$el:"p",children:"Заполните профиль, что бы продолжить работу"}]:[],{$formkit:"primeInputText",name:"full_name",label:"Имя",validation:"required"},{$formkit:"primeInputText",type:"tel",name:"phone_number",label:"Телефон",validation:""}]}function c(){const r=k().query.force;return!!(Array.isArray(r)?r[0]:r)}async function d(){if(!e.value)return;const{full_name:o,phone_number:t}=e.value;await a.setProfile(o,t)}return(o,t)=>{const r=m("FormKitSchema"),u=m("FormKit");return i(),_("div",P,[e.value?(i(),_("div",q,[p(u,{modelValue:e.value,"onUpdate:modelValue":t[0]||(t[0]=v=>e.value=v),type:"form","submit-attrs":{inputClass:"p-button p-component"},onSubmit:d},{default:x(()=>[p(r,{schema:n.value,data:e.value},null,8,["schema","data"])]),_:1},8,["modelValue"])])):C("",!0)])}}});const g=I(V,[["__scopeId","data-v-5fe7e524"]]);export{g as default};
